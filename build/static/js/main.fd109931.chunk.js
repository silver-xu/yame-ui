(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{140:function(e,t,n){},238:function(e,t,n){e.exports=n(624)},503:function(e,t,n){},532:function(e,t,n){},575:function(e,t,n){},594:function(e,t){},597:function(e,t,n){},601:function(e,t,n){},603:function(e,t,n){},605:function(e,t,n){},607:function(e,t,n){},609:function(e,t,n){},611:function(e,t,n){},617:function(e,t,n){},619:function(e,t,n){},622:function(e,t,n){},624:function(e,t,n){"use strict";n.r(t);var a,o=n(0),r=n.n(o),c=n(31),i=n.n(c),l=n(630),u=n(633),s=n(632),d=n(26),m=n(6),f=n(142),p=n.n(f),h=n(12),v=function(){return window},g=function(e,t,n,a){e.authResponse?function(e,t,n,a){v().FB.api("/me",{locale:e.language,fields:e.fields.join(",")},function(o){var r=Object(h.a)({},o,{accessToken:a});n(Object(h.a)({},t,{isLoggedIn:!0,facebookUser:r,loaded:!0}));var c=e.onLoginSuccess;c&&c(r)})}(t,n,a,e.authResponse.accessToken):t.onFailure&&t.onFailure(e)},b=function(e){var t=Object(o.useState)({isLoggedIn:!1,loaded:!1}),n=Object(m.a)(t,2),a=n[0],r=n[1],c=e.appId,i=e.fields,l=e.language,u=e.version;return Object(o.useEffect)(function(){!function(e,t,n){v().fbAsyncInit=function(){v().FB.init({version:"v".concat(e.version),appId:"".concat(e.appId),xfbml:!1,cookie:!1}),v().FB.getLoginStatus(function(a){return g(a,e,t,n)})}}(e,a,r),function(e,t){!function(t,n,a){var o=t.createElement("script");o.id="facebook-jssdk",o.src="https://connect.facebook.net/".concat(e.language,"/sdk.js"),t.head.appendChild(o);var r=t.getElementById("fb-root");r||((r=t.createElement("div")).id="fb-root",t.body.appendChild(r))}(document)}(e)},[c,i.join(","),l,u]),[a,function(){v().FB.login(function(t){return g(t,e,a,r)})},function(){v().FB.logout(function(t){return function(e,t,n,a){if(e.authResponse){a(Object(h.a)({},n,{isLoggedIn:!1,facebookUser:void 0}));var o=t.onLogoutSuccess;o&&o()}else t.onFailure&&t.onFailure(e)}(t,e,a,r)})}]},E=n(34),O=n(29),w=n(91),C=function(e,t,n){for(var a=[],o=t.exec(e);null!==o;)a.push(o[n]),o=t.exec(e);return a},k=6048e5,y=864e5,j=36e5,N=6e4,S=1e3,D=function(e,t){return e>1?t+"s":t},T=function(e,t){var n=function(e,t){var n=function(e,t){return e.getTime()-t.getTime()}(e,t);return{weeks:Math.floor(n/k),days:Math.floor(n%k/y),hours:Math.floor(n%y/j),minutes:Math.floor(n%j/N),seconds:Math.floor(n%N/S)}}(e,t);return n.weeks?"".concat(n.weeks," ").concat(D(n.weeks,"week")):n.days?"".concat(n.days," ").concat(D(n.days,"day")):n.hours?"".concat(n.hours," ").concat(D(n.hours,"hour")):n.minutes?"".concat(n.minutes," ").concat(D(n.minutes,"min")):"".concat(n.seconds," ").concat(D(n.seconds,"sec"))},M=n(244),F=n(436),R={whiteList:{a:["href","title","target"],h1:["id"],h2:["id"],h3:["id"],h4:["id"],p:[],ul:[],ol:[],li:[],table:[],th:[],tr:[],td:[],thead:[],tbody:[],b:[],i:[],em:[],pre:[]}},x=new RegExp(/<h[1-3] id=".*">.*<\/h[1-3]>/gm),P=new RegExp(/<h[1-3] id=".*">(.*?)<\/h[1-3]>/gm),I=new RegExp(/id="(.*?)"/gm),A=new w.Converter({tables:!0,smoothLivePreview:!0,strikethrough:!0,requireSpaceBeforeHeadingText:!0,disableForced4SpacesIndentedSublists:!0,extensions:[M]}),L=function(){function e(t,n,a,o){var r=this;Object(E.a)(this,e),this.id=void 0,this.docName=void 0,this.content=void 0,this.lastModified=void 0,this.renderedContentCached=void 0,this.contentTreeCached=void 0,this.flatContentTreeCached=void 0,this.unchangedContent=void 0,this.equals=function(e){return r.content===e.content&&r.docName===e.docName&&r.lastModified.toISOString()===e.lastModified.toISOString()},this.buildContentNodeTree=function(){if(r.content!==r.unchangedContent||!r.contentTreeCached){var e=r.getFlatContentNodeTree(),t={id:"root",text:"root",level:0,nodes:[]};r.recursivelyBuildContentNodeTree(e,0,t),r.contentTreeCached=t}return r.contentTreeCached},this.getFlatContentNodeTree=function(){if(r.content!==r.unchangedContent||!r.flatContentTreeCached){var e=C(r.renderContent(),x,0);r.flatContentTreeCached=e.map(function(e){var t=e,n=C(t,P,1),a=n?n[0]:"",o=C(t,I,1);return{id:o?o[0]:"",text:a,level:parseInt(t.substring(2,3),10),nodes:[]}})}return r.flatContentTreeCached},this.recursivelyBuildContentNodeTree=function(e,t,n){t>=e.length||(e[t].level<n.level?n.parentNode&&r.recursivelyBuildContentNodeTree(e,t,n.parentNode):(e[t].level===n.level?n.parentNode&&(e[t].parentNode=n.parentNode,n.parentNode.nodes.push(e[t])):e[t].level>n.level&&(e[t].parentNode=n,n.nodes.push(e[t])),r.recursivelyBuildContentNodeTree(e,t+1,e[t])))},this.id=t,this.docName=n,this.content=a,this.unchangedContent=a,this.lastModified=new Date(o)}return Object(O.a)(e,null,[{key:"parseFromResponse",value:function(t){var n=t.doc;return new e(n.id,n.docName,n.content,n.lastModified)}}]),Object(O.a)(e,[{key:"renderContent",value:function(){if(this.content!==this.unchangedContent||!this.renderedContentCached){var e=A.makeHtml(this.content);this.renderedContentCached=F(e,R),this.unchangedContent=this.content}return this.renderedContentCached}},{key:"getStatistics",value:function(){return function(e){var t=(0,e.renderContent)().replace(/(<([^>]+)>)/gi,""),n=t.split(/[\s,.\r\n]+/),a=t.split(/[\n\r]+/);return{charCount:t.length,wordCount:n.length,lineCount:a.length}}(this)}},{key:"getFriendlyLastModifiedTimespan",value:function(){return"".concat(T(new Date,this.lastModified))}}]),e}(),U=n(32),B=n.n(U),_=function(e,t){t.docs[e.id]=e,t.currentDocId=e.id},q=function(e,t){Object.keys(t.docs).length>1&&(delete t.docs[e.id],t.currentDocId=t.sortedDocs[0].id)},W=function(e,t){t.currentDocId=e.id},K=function(e,t){e.lastModified=new Date,t.docs[e.id]=e},H=function(){function e(t){var n=this;Object(E.a)(this,e),this.docs=void 0,this.currentDocId=void 0,this.newDoc=function(e){var t=new L(B()(),n.getUniqueDocName(e.namePrefix),e.defaultContent,new Date);return _(t,n),t},this.openDoc=function(e){W(n.docs[e],n)},this.removeDoc=function(e){q(n.docs[e],n)},this.updateDocName=function(e,t){e.docName=t,n.updateDoc(e)},this.updateDoc=function(e){K(e,n)},this.getUniqueDocName=function(e){for(var t=1;n.enumerableDocs.find(function(n){return n.docName==="".concat(e," ").concat(t)});)t++;return"".concat(e," ").concat(t)},this.docs=t,this.currentDocId=this.sortedDocs[0].id}return Object(O.a)(e,[{key:"sortedDocs",get:function(){return this.enumerableDocs.sort(function(e,t){return new Date(t.lastModified).getTime()-new Date(e.lastModified).getTime()})}},{key:"enumerableDocs",get:function(){return Object.entries(this.docs).map(function(e){var t=Object(m.a)(e,2);t[0];return t[1]})}},{key:"currentDoc",get:function(){return this.docs[this.currentDocId]}}],[{key:"parseFromJson",value:function(t){var n=JSON.parse(t),a={};return Object.entries(n.docs).forEach(function(e){var t=Object(m.a)(e,2),n=t[0],o=t[1];a[n]=new L(o.id,o.docName,o.content,o.lastModified)}),new e(a)}},{key:"parseFromResponse",value:function(t){var n={};return t.docs.forEach(function(e){n[e.id]=new L(e.id,e.docName,e.content,e.lastModified)}),new e(n)}}]),Object(O.a)(e,[{key:"clone",value:function(){var t=Object(h.a)({},this),n={};return Object.entries(t.docs).forEach(function(e){var t=Object(m.a)(e,2),a=t[0],o=t[1];n[a]=new L(o.id,o.docName,o.content,o.lastModified)}),new e(n)}}]),e}();!function(e){e.Anonymous="Anonymous",e.Facebook="Facebook"}(a||(a={}));var z=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_FB_APP_ID||"",$=function(){var e=localStorage.getItem("anonymousAuthToken"),t=e||p()();return e!==t&&localStorage.setItem("anonymousAuthToken",t),{authToken:t,id:t,isValid:!0,userName:"Anonymous",userType:a.Anonymous}},Q=r.a.createContext({login:function(){},logout:function(){}}),V=r.a.memo(function(e){var t=e.children,n=e.onLoginSuccess,c=e.onLogoutSuccess,i=Object(o.useState)(void 0),l=Object(m.a)(i,2),u=l[0],s=l[1],d=b({appId:z,language:"EN",version:"3.1",fields:["id","name","email"],onLoginSuccess:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t={authToken:"fb-".concat(e.accessToken),id:e.id,isValid:!0,userName:e.name,userType:a.Facebook};s(t),G(t,n)}),onLogoutSuccess:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){s($()),J(c)}),onFailure:function(){s($())}}),f=Object(m.a)(d,3),p=(f[0],f[1]),h=f[2];return r.a.createElement(Q.Provider,{value:{currentUser:u,login:p,logout:h}},t)}),G=function(e,t){t&&t(e)},J=function(e){console.log("logged out"),e&&e()},Y=Object(d.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:{light:"#90caf9",main:"#2196f3",dark:"#1565c0",contrastText:"#fff"}}}),X=(n(503),n(36)),Z=n(631),ee=n(47),te=n(9),ne=n(65),ae=n(66),oe=n(70),re=n(37),ce=n.n(re),ie=n(33),le=n(17),ue=n(5),se=n(8),de=n(13),me=n(93),fe=n.n(me),pe=n(145),he={};function ve(){var e=Object(X.a)(["\n    mutation publishDoc($docMutation: DocMutation) {\n        publishDoc(docMutation: $docMutation)\n    }\n"]);return ve=function(){return e},e}function ge(){var e=Object(X.a)(["\n    mutation UpdateDocRepo($docRepoMutation: DocRepoMutation) {\n        updateDocRepo(docRepoMutation: $docRepoMutation)\n    }\n"]);return ge=function(){return e},e}var be=r.a.createContext({docRepo:new H({foo:new L("foo","bar","foobar",new Date)}),isSaving:!1,editorKey:"",updateCurrentDoc:function(){},newDoc:function(){},openDoc:function(e){},removeDoc:function(e){},updateCurrentDocName:function(e){},publishCurrentDoc:function(){}}),Ee=ce()(ge()),Oe=ce()(ve()),we=r.a.memo(function(e){var t=e.docRepo,n=e.defaultDoc,a=e.children,c=Object(o.useState)({isSaving:!1,editorKey:B()()}),i=Object(m.a)(c,2),l=i[0],u=i[1],s=Object(o.useState)({docRepo:t,unchangedDocRepo:t.clone()}),d=Object(m.a)(s,2),f=d[0],p=d[1],v=l.isSaving,g=l.editorKey,b=f.docRepo,E=f.unchangedDocRepo,O=function(e){u(Object(h.a)({},l,{isSaving:!0}));var t=function(e,t){return{newDocs:Object.entries(e.docs).filter(function(e){var n=Object(m.a)(e,1)[0];return!t.docs[n]}).map(function(e){var t=Object(m.a)(e,2)[1];return{id:t.id,docName:t.docName,content:t.content,lastModified:t.lastModified}}),updatedDocs:Object.entries(e.docs).filter(function(e){var n=Object(m.a)(e,2),a=n[0],o=n[1];return t.docs[a]&&!t.docs[a].equals(o)}).map(function(e){var t=Object(m.a)(e,2)[1];return{id:t.id,docName:t.docName,content:t.content,lastModified:t.lastModified}}),deletedDocIds:Object.entries(t.docs).filter(function(t){var n=Object(m.a)(t,1)[0];return!e.docs[n]}).map(function(e){return Object(m.a)(e,1)[0]})}}(b,E);(t.newDocs.length>0||t.updatedDocs.length>0||t.deletedDocIds.length>0)&&e({variables:{docRepoMutation:t}}).then(function(){p(Object(h.a)({},f,{unchangedDocRepo:b.clone()})),setTimeout(function(){u(Object(h.a)({},l,{isSaving:!1}))},500)})},w=function(e){var t,n;(t=O,n=1500,function(){for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];he[t.name]&&clearTimeout(he[t.name]),he[t.name]=setTimeout(function(){delete he[t.name],t.apply(null,a)},n)})(e)},C=function(){var e=Object(pe.a)(fe.a.mark(function e(t){var n,a,o,r,c;return fe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=b.currentDoc,a=n.id,o=n.docName,r=n.content,c=n.lastModified,e.next=3,t({variables:{docMutation:{id:a,docName:o,content:r,lastModified:c}}});case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(ie.Mutation,{mutation:Oe},function(e){return r.a.createElement(ie.Mutation,{mutation:Ee},function(t){return r.a.createElement(be.Provider,{value:{docRepo:b,isSaving:v,editorKey:g,updateCurrentDoc:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return function(e,t){b.currentDoc.content=e,b.updateDoc(b.currentDoc),p(Object(h.a)({},f,{docRepo:b})),w(t)}(e,t)}),newDoc:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return e=t,b.newDoc(n),u(Object(h.a)({},l,{editorKey:B()()})),p(Object(h.a)({},f,{docRepo:b})),void O(e);var e}),openDoc:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return function(e){b.openDoc(e),u(Object(h.a)({},l,{editorKey:B()()})),p(Object(h.a)({},f,{docRepo:b}))}(e)}),removeDoc:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return function(e,t){b.removeDoc(e),u(Object(h.a)({},l,{editorKey:B()()})),p(Object(h.a)({},f,{docRepo:b})),O(t)}(e,t)}),updateCurrentDocName:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return function(e,t){b.updateDocName(b.currentDoc,e),u(Object(h.a)({},l,{editorKey:B()()})),p(Object(h.a)({},f,{docRepo:b})),O(t)}(e,t)}),publishCurrentDoc:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return C(e)})}},a)})})}),Ce=n(59),ke=n.n(Ce),ye=Object(d.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider),padding:"0px"}}})(function(e){var t=e.children,n=e.classes;return r.a.createElement(ke.a,{className:n.root},t)}),je=n(60),Ne=n.n(je),Se=n(61),De=n.n(Se),Te=n(43),Me=n.n(Te);le.b.add(ue.u);var Fe=Object(d.withStyles)(function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.children,n=e.classes,a=e.onClose;return r.a.createElement(Ne.a,null,r.a.createElement(Me.a,{variant:"h6"},t),a?r.a.createElement(De.a,{"aria-label":"Close",className:n.closeButton,onClick:a},r.a.createElement(se.a,{icon:["fas","times"]})):null)}),Re=(n(532),n(62)),xe=n.n(Re),Pe=Object(d.withStyles)(function(e){return{root:{cursor:"pointer"}}})(function(e){var t=e.children,n=e.classes,a=e.align,o=e.component;return r.a.createElement(xe.a,{className:n.root,align:a,component:o},t)});le.b.add(ue.w,ue.b);var Ie=r.a.memo(function(){var e=Object(o.useContext)(be),t=e.openDoc,n=e.docRepo,a=(e.removeDoc,Object(o.useContext)(Ue)),c=a.isFileManagerOpen,i=a.setFileManagerOpen,l=a.setRemoveFileAlertOpen,u=Object(o.useState)(n.currentDoc.id),s=Object(m.a)(u,2),d=s[0],f=s[1];Object(o.useEffect)(function(){f(n.currentDoc.id)},[n.currentDoc.id]);var p=function(){i(!1)};return r.a.createElement(de.b,{"aria-labelledby":"customized-dialog-title",onClose:function(){return i(!1)},open:c,fullWidth:!0},r.a.createElement(Fe,{onClose:p},"My document Repository"),r.a.createElement(ye,null,r.a.createElement(de.i,null,r.a.createElement("colgroup",null,r.a.createElement("col",{width:"1%"}),r.a.createElement("col",{width:"60%"}),r.a.createElement("col",{width:"38%"}),r.a.createElement("col",{width:"1%"})),r.a.createElement(de.k,null,r.a.createElement(de.l,null,r.a.createElement(Pe,null,"Selected"),r.a.createElement(Pe,null,"Document"),r.a.createElement(Pe,{align:"right"},"Last Modified"),r.a.createElement(Pe,null,"Options"))),r.a.createElement(de.j,null,n.sortedDocs.map(function(e){return r.a.createElement(de.l,{key:e.id,hover:!0,onClick:function(t){return function(e,t){f(t.id)}(0,e)}},r.a.createElement(Pe,{component:"th"},e.id===d&&r.a.createElement(se.a,{icon:"check"})),r.a.createElement(Pe,{component:"th"},e.docName),r.a.createElement(Pe,{align:"right"},e.getFriendlyLastModifiedTimespan()," ago"),r.a.createElement(Pe,{align:"center"},r.a.createElement("div",{className:"remove-handler",onClick:function(t){!function(e,t){e.stopPropagation(),i(!1),l(!0,t)}(t,e)}},r.a.createElement(se.a,{icon:"trash-alt",className:"remove"}))))})))),r.a.createElement(de.c,null,r.a.createElement(de.a,{variant:"contained",onClick:function(){t(d),i(!1)},color:"primary"},"Open"),r.a.createElement(de.a,{variant:"contained",onClick:p},"Cancel")))}),Ae=function(e){return r.a.createElement(de.h,Object.assign({direction:"up"},e))},Le=function(){var e=Object(o.useContext)(Ue),t=e.isRemoveFileAlertOpen,n=e.setRemoveFileAlertOpen,a=e.docToRemove,c=Object(o.useContext)(be).removeDoc;return a?r.a.createElement("div",null,r.a.createElement(de.b,{open:t,TransitionComponent:Ae,keepMounted:!0,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(de.f,{id:"alert-dialog-slide-title"},"Remove this documet?"),r.a.createElement(de.d,null,r.a.createElement(de.e,{id:"alert-dialog-slide-description"},'"'.concat(a.docName,"\" will be unrecoverable after it's\n                        been removed. Would you like to continue?"))),r.a.createElement(de.c,null,r.a.createElement(de.a,{onClick:function(){n(!1)}},"Cancel"),r.a.createElement(de.a,{onClick:function(){a&&(c(a.id),n(!1))},color:"primary"},"Okay")))):null},Ue=r.a.createContext({setFileManagerOpen:function(){},isFileManagerOpen:!1,setRemoveFileAlertOpen:function(){},isRemoveFileAlertOpen:!1,docToRemove:new L("foo","bar","foobar",new Date)}),Be=r.a.memo(function(e){var t=Object(o.useState)(!1),n=Object(m.a)(t,2),a=n[0],c=n[1],i=Object(o.useState)({isRemoveFileAlertOpen:!1,doc:new L("foo","bar","foobar",new Date)}),l=Object(m.a)(i,2),u=l[0],s=l[1],d=e.children;return r.a.createElement(Ue.Provider,{value:{isFileManagerOpen:a,setFileManagerOpen:function(e){c(e)},isRemoveFileAlertOpen:u.isRemoveFileAlertOpen,setRemoveFileAlertOpen:function(e,t){s({isRemoveFileAlertOpen:!0,doc:t})},docToRemove:u.doc}},r.a.createElement(Ie,null),r.a.createElement(Le,null),d)}),_e=r.a.createContext({setActiveMenu:function(){},open:!1,inTransition:!1}),qe=function(e){var t=e.children,n=Object(o.useState)(void 0),a=Object(m.a)(n,2),c=a[0],i=a[1],l=Object(o.useState)(!1),u=Object(m.a)(l,2),s=u[0],d=u[1];return r.a.createElement(_e.Provider,{value:{activeMenu:c,setActiveMenu:function(e){c===e?i(void 0):c?(d(!0),i(void 0),setTimeout(function(){i(e),d(!1)},300)):i(e)},open:void 0!==c,inTransition:s}},t)},We=(n(575),function(e){var t=e.text;return r.a.createElement("div",{className:"bg"},r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"bounce1"}),r.a.createElement("div",{className:"bounce2"}),r.a.createElement("div",{className:"bounce3"}),r.a.createElement("h2",null,t)))}),Ke=n(69),He=n(67),ze=n(71),$e=n(4),Qe=n.n($e),Ve=(n(577),n(148)),Ge=n.n(Ve),Je=(n(140),function(e){var t=e.description,n=e.heading,a=e.icon,o=e.onClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container command",onClick:o},r.a.createElement("h3",null,t),r.a.createElement("div",{className:"primary"},r.a.createElement(se.a,{icon:a}),n)))});le.b.add(ue.c);var Ye=function(e){var t=e.description,n=e.heading,a=e.icon,c=e.children,i=e.expanded,l=Object(o.useState)(i),u=Object(m.a)(l,2),s=u[0],d=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container expandable",onClick:function(){return d(!s)}},r.a.createElement("h3",null,t),r.a.createElement("div",{className:"primary"},r.a.createElement(se.a,{icon:a}),n),r.a.createElement(se.a,{className:Qe()({chev:!0,down:s}),icon:"chevron-right"})),r.a.createElement("div",{className:Qe()({hide:!s,content:!0})},c))};Ye.defaultProps={expanded:!1};var Xe=function(e){var t=e.shareLink;return r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,"Please copy the following link to share amongst:"),r.a.createElement("input",{type:"input",className:"link",value:t,onFocus:Ze}),r.a.createElement(se.a,{icon:"copy"}),r.a.createElement(se.a,{icon:"pen-alt"}))},Ze=function(e){e.target.setSelectionRange(0,e.target.value.length)};n(597);le.b.add(ue.q,ue.w,ue.l,ue.g,ue.k,ue.m,ue.i,ue.b);var et=function(){var e=Object(o.useContext)(Ue).setFileManagerOpen,t=Object(o.useContext)(_e).setActiveMenu,n=Object(o.useContext)(be).newDoc;return r.a.createElement("div",{className:"file-menu generic-menu"},r.a.createElement(Je,{description:"Create a new document",heading:"New Document",icon:"plus",onClick:function(){n(),t(void 0)}}),r.a.createElement(Je,{description:"Manage existing document from cloud",heading:"Open Document Repository",icon:"file",onClick:function(){e(!0),t(void 0)}}),r.a.createElement(Je,{description:"Upload a Markdown file from local drive",heading:"Upload Markdown",icon:"file-upload"}))},tt=(n(599),n(601),function(e){function t(e){var n;return Object(E.a)(this,t),(n=Object(Ke.a)(this,Object(He.a)(t).call(this,e))).previewRef=void 0,n.handleScroll=function(){if(n.previewRef.current){var e=n.previewRef.current.scrollTop/n.previewRef.current.scrollHeight;n.props.onScroll(e)}},n.injectPreviewMarkup=function(e){return{__html:e}},n.previewRef=r.a.createRef(),n}return Object(ze.a)(t,e),Object(O.a)(t,[{key:"componentDidUpdate",value:function(){var e=this.props.scrollPercentage;if(this.previewRef.current){var t=e*this.previewRef.current.scrollHeight;this.previewRef.current.scrollTo(0,t)}}},{key:"render",value:function(){var e=this.props,t=e.previewContent,n=e.onFocus,a=e.onBlur,o=e.onMouseOver;return r.a.createElement("div",{className:"preview-wrapper"},r.a.createElement("div",{ref:this.previewRef,className:"preview-pane markdown-body",onScroll:this.handleScroll,onMouseEnter:n,onMouseLeave:a,onMouseOver:o,dangerouslySetInnerHTML:this.injectPreviewMarkup(t)}))}}]),t}(o.Component)),nt=n(44),at=n.n(nt);n(603);le.b.add(ue.h,ue.k,ue.m,ue.x,ue.f,ue.p,ue.j,ue.o,ue.d);var ot=function(e){var t=e.shareLink,n=Object(o.useContext)(be).publishCurrentDoc;return r.a.createElement("div",{className:"share-menu generic-menu"},r.a.createElement(Je,{description:"Export the document as Microsoft Word",heading:"Download as Word",icon:"file-word"}),r.a.createElement(Je,{description:"Export the document as Adobe Pdf",heading:"Download as Pdf",icon:"file-pdf"}),r.a.createElement(Je,{onClick:n,description:"Please publish first to obtain sharing links",heading:"Publish Now",icon:"external-link-square-alt"}),r.a.createElement(Xe,{shareLink:t}),r.a.createElement(Ye,{description:"Options about sharing",heading:"Options",icon:"cogs"},r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,"Options about sharing"),r.a.createElement("div",{className:"field"},r.a.createElement(se.a,{icon:"file-word"}),r.a.createElement("label",null,"Generate MS Word"),r.a.createElement("input",{type:"checkbox"})),r.a.createElement("div",{className:"field"},r.a.createElement(se.a,{icon:"file-pdf"}),r.a.createElement("label",null,"Generate Adobe PDF"),r.a.createElement("input",{type:"checkbox"})),r.a.createElement("div",{className:"field"},r.a.createElement(se.a,{icon:"unlock-alt"}),r.a.createElement("label",null,"Protect doc with a Secret"),r.a.createElement("input",{type:"checkbox"}))),r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,"Secrets"),r.a.createElement("h4",null,"Secret phrase to protect the document"),r.a.createElement("input",{type:"text",className:"secret",placeholder:"Please enter secret phrase"}),r.a.createElement("h3",null,"Options about secrets"),r.a.createElement("div",{className:"field"},r.a.createElement(se.a,{icon:"file-alt"}),r.a.createElement("label",null,"Protect the document"),r.a.createElement("input",{type:"radio"})),r.a.createElement("div",{className:"field"},r.a.createElement(se.a,{icon:"newspaper",className:"narrow"}),r.a.createElement("label",null,"Protect sections"),r.a.createElement("input",{type:"radio"})),r.a.createElement("div",{className:"field"},r.a.createElement(se.a,{icon:"file-pdf"}),r.a.createElement("label",null,"Protect Word / PDF Downlads"),r.a.createElement("input",{type:"checkbox"}))),r.a.createElement("div",{className:"container buttons"},r.a.createElement(at.a,{variant:"contained",color:"primary",size:"small"},"Update"),r.a.createElement(at.a,{variant:"contained",size:"small"},"Cancel"))))},rt=(n(605),function(e){var t=e.children,n=Object(o.useContext)(_e),a=n.open,c=n.inTransition,i=n.setActiveMenu;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Qe()({hide:!a&&!c,"side-bar-overlay":!0}),onClick:function(){return i(void 0)}}),r.a.createElement("div",{className:Qe()({hide:!a,"side-bar":!0})},t),";")});n(607);le.b.add(ue.r,ue.e,ue.v);var ct,it=function(e){var t=e.charCount,n=e.wordCount,a=e.lineCount,o=e.isSaving,c=e.hideToolbar,i=e.splitScreen,l=o&&r.a.createElement(se.a,{icon:"save"});return r.a.createElement("div",{className:"status-bar"},r.a.createElement("span",null,l," "),r.a.createElement("span",{className:Qe()({command:!0,active:i}),onClick:e.onSplitScreenToggle},r.a.createElement(se.a,{icon:"columns"})),r.a.createElement("span",{className:Qe()({command:!0,active:!c}),onClick:e.onToolbarToggle},r.a.createElement(se.a,{icon:"toolbox"})),r.a.createElement("span",null,"Markdown"),r.a.createElement("span",null,r.a.createElement("b",null,t)," chars"),r.a.createElement("span",null,r.a.createElement("b",null,n)," words"),r.a.createElement("span",null,r.a.createElement("b",null,a)," lines"))},lt=n(149);n(609);le.b.add(ue.n,ue.s,ue.y,ue.t,lt.a),function(e){e.File="File",e.Share="Share",e.UserProfile="UserProfile"}(ct||(ct={}));var ut=function(e){var t,n=Object(o.useContext)(Q).currentUser,c=Object(o.useContext)(be),i=c.updateCurrentDocName,l=c.docRepo,u=Object(o.useContext)(_e),s=u.activeMenu,d=u.setActiveMenu,m=function(e){return 12*e.length+10};return r.a.createElement("div",{className:"toolbar-extra"},r.a.createElement("div",{className:"filename"},r.a.createElement("input",{style:(t=l.currentDoc.docName,m(t)>100?{width:m(t)+"px"}:{}),type:"text",value:l.currentDoc.docName,className:Qe()({error:0===l.currentDoc.docName.length}),onChange:function(e){i(e.target.value)},placeholder:"Enter title",maxLength:15})),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"http://localhost:3000/preview/".concat(l.currentDoc.id),target:"_blank"},r.a.createElement("i",null,r.a.createElement(se.a,{icon:["fab","firefox"]})))),r.a.createElement("li",{onClick:function(){return d(ct.File)}},r.a.createElement("i",{className:Qe()({active:s===ct.File})},r.a.createElement(se.a,{icon:"folder"}))),r.a.createElement("li",{onClick:function(){return d(ct.Share)}},r.a.createElement("i",{className:Qe()({active:s===ct.Share})},r.a.createElement(se.a,{icon:"share"}))),r.a.createElement("li",{onClick:function(){return d(ct.UserProfile)}},r.a.createElement("i",{className:Qe()({active:s===ct.UserProfile})},n&&n.userType===a.Facebook?r.a.createElement(se.a,{icon:["fab","facebook-square"]}):r.a.createElement(se.a,{icon:"user-secret"})))))},st=function(){var e=Object(o.useContext)(Q),t=e.currentUser,n=e.login,c=e.logout;return r.a.createElement("div",{className:"user-profile generic-menu"},t&&t.userType===a.Anonymous?r.a.createElement(Je,{description:"Login to yame using your facebook account to access your documents everywhere",heading:"Login to Facebook",icon:["fab","facebook-square"],onClick:n}):r.a.createElement(Je,{description:"Sign out from yame. You will no longer able to access your documents on a different computer",heading:"Logout from Facebook",icon:["fas","user-secret"],onClick:c}))},dt=(n(611),function(e){function t(e){var n;return Object(E.a)(this,t),(n=Object(Ke.a)(this,Object(He.a)(t).call(this,e))).mdeInstance=void 0,n.previewInFocus=void 0,n.handlePreviewFocus=function(){n.previewInFocus=!0},n.handlePreviewBlur=function(){n.previewInFocus=!1},n.handleEditorScroll=function(e){if(!n.previewInFocus){var t=e.doc.scrollTop/e.doc.height;n.setState({editorScrollPercentage:t})}},n.setInstance=function(e){n.mdeInstance=e,n.mdeInstance.codemirror.setOption("lineNumbers",!0)},n.handlePreviewScroll=function(e){if(n.mdeInstance&&n.previewInFocus){var t=n.mdeInstance.codemirror.doc.height*e;n.mdeInstance.codemirror.scrollTo(0,t)}},n.handleSplitScreenToggle=function(){n.setState({splitScreen:!n.state.splitScreen})},n.handleToolbarToggle=function(){n.setState({hideToolbars:!n.state.hideToolbars})},n.state={editorScrollPercentage:0,toolbarOutOfFocus:!0,splitScreen:n.props.splitScreen,hideToolbars:n.props.hideToolbars},n.previewInFocus=!1,n}return Object(ze.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.editorScrollPercentage,a=t.toolbarOutOfFocus,o=t.hideToolbars,c=t.splitScreen;return r.a.createElement(be.Consumer,null,function(t){var i=t.docRepo,l=t.isSaving,u=t.editorKey,s=t.updateCurrentDoc;return r.a.createElement(_e.Consumer,null,function(t){var d=t.activeMenu,m=t.setActiveMenu;return r.a.createElement("div",{className:Qe()({"editor-container":!0,"side-bar-open":d,"no-toolbar":o,"editor-only":!c})},r.a.createElement(ut,{lostFocus:a,onMenuToggle:m}),r.a.createElement("div",{className:"left-pane"},r.a.createElement(Ge.a,{key:u,onChange:s,getMdeInstance:e.setInstance,value:i.currentDoc.content,events:{change:function(){},changes:function(){},beforeChange:function(){},cursorActivity:function(){},beforeSelectionChange:function(){},viewportChange:function(){},gutterClick:function(){},focus:function(){},blur:function(){},scroll:function(t){return e.handleEditorScroll(t)},update:function(){},renderLine:function(){},mousedown:function(){},dblclick:function(){},touchstart:function(){},contextmenu:function(){},keydown:function(){},keypress:function(){},keyup:function(){},cut:function(){},copy:function(){},paste:function(){},dragstart:function(){},dragenter:function(){},dragover:function(){},dragleave:function(){},drop:function(){}},options:{status:!1,autosave:{enabled:!1,uniqueId:"hackable"},toolbar:["bold","italic","strikethrough","|","heading-1","heading-2","heading-3","|","unordered-list","ordered-list","|","code","link","image","table"]}})),r.a.createElement("div",{className:"splitter"}),r.a.createElement("div",{className:"right-pane"},r.a.createElement(tt,{scrollPercentage:n,previewContent:i.currentDoc.renderContent(),onScroll:e.handlePreviewScroll,onFocus:e.handlePreviewFocus,onMouseOver:e.handlePreviewFocus,onBlur:e.handlePreviewBlur})),r.a.createElement(rt,null,r.a.createElement(r.a.Fragment,null,d===ct.File&&r.a.createElement(et,null),d===ct.Share&&r.a.createElement(ot,{shareLink:"http://yame.io/silver-xu/resume"}),d===ct.UserProfile&&r.a.createElement(st,null))),r.a.createElement(it,{onToolbarToggle:e.handleToolbarToggle,onSplitScreenToggle:e.handleSplitScreenToggle,charCount:i.currentDoc.getStatistics().charCount,lineCount:i.currentDoc.getStatistics().lineCount,wordCount:i.currentDoc.getStatistics().wordCount,isSaving:l,hideToolbar:o,splitScreen:c}))})})}}]),t}(o.Component));dt.defaultProps={splitScreen:!0,hideToolbars:!1};var mt=dt;function ft(){var e=Object(X.a)(["\n    {\n        docRepo {\n            docs {\n                id\n                docName\n                content\n                lastModified\n            }\n            publishedDocs {\n                id\n                docName\n                content\n                lastModified\n            }\n        }\n        defaultDoc {\n            namePrefix\n            defaultContent\n        }\n    }\n"]);return ft=function(){return e},e}var pt=Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_EXP_API_URL||"",ht=ce()(ft()),vt=r.a.memo(function(e){var t=e.currentUser,n=Object(ne.a)(function(e,n){var a=n.headers;return{headers:Object(h.a)({},a,{authorization:t?t.authToken:void 0})}}),a=new ee.default({link:te.a.from([Object(ae.a)(function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.map(function(e){var t=e.message,n=e.locations,a=e.path;return console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(a))}),n&&console.log("[Network error]: ".concat(n))}),n.concat(new oe.a({uri:pt}))]),cache:new Z.a});return t?r.a.createElement(ie.ApolloProvider,{client:a},r.a.createElement(ie.Query,{query:ht,variables:{authToken:t.authToken},fetchPolicy:"network-only"},function(e){e.loading,e.error;var t=e.data;console.log(t);var n=t&&t.docRepo?H.parseFromResponse(t.docRepo):void 0;return n?r.a.createElement("div",{className:"App"},r.a.createElement(we,{docRepo:n,defaultDoc:t.defaultDoc},r.a.createElement(Be,null,r.a.createElement(qe,null,r.a.createElement(mt,null))))):r.a.createElement(We,{text:"Initializing Yame editor..."})})):r.a.createElement(We,{text:"Authenticating User..."})}),gt=function(){return r.a.createElement(d.MuiThemeProvider,{theme:Y},r.a.createElement(V,null,r.a.createElement(Q.Consumer,null,function(e){var t=e.currentUser;return r.a.createElement(vt,{currentUser:t})})))},bt=(n(617),function(e){var t=e.doc;return r.a.createElement("div",{className:"markdown-body",dangerouslySetInnerHTML:{__html:t.renderContent()}})}),Et=(n(619),n(150)),Ot=n.n(Et);le.b.add(ue.a);var wt=function(e){var t=e.doc,n=t.buildContentNodeTree(),a={},c=function(){var e;return Object.entries(a).map(function(t){var n=Object(m.a)(t,2)[1];(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.getBoundingClientRect();return n.top>=t&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)})(n.dom,60)&&(!e||n.dom.scrollTop<e.dom.scrollTop)&&(e=n)}),e},i=Object(o.useState)(void 0),l=Object(m.a)(i,2),u=l[0],s=l[1],d=Object(o.useState)(!1),f=Object(m.a)(d,2),p=f[0],h=f[1],v=Object(o.useState)(!1),g=Object(m.a)(v,2),b=g[0],E=g[1],O=r.a.createRef();Object(o.useEffect)(function(){if(function e(t,n){t.nodes.forEach(function(t){n(t),e(t,n)})}(n,function(e){var t=document.querySelector("#".concat(e.id));t&&(a[e.id]={dom:t,node:e})}),!p&&!u){var e=c();s(e?e.node:void 0)}},[{}]);var w=function(e){if(!p){var t=c();t&&u&&t.node.id!==u.id&&s(t.node),e.currentTarget.scrollTop>200?E(!0):E(!1)}};return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},"This is a preview of [",t.docName,"], copy & paste the url would not work without your account."),r.a.createElement("div",{className:"nav"},function e(t){return r.a.createElement("ul",null,t.nodes.map(function(t){return r.a.createElement("li",{onClick:function(e){return function(e,t){e.stopPropagation(),h(!0),s(t),setTimeout(function(){h(!1)},1e3)}(e,t)}},r.a.createElement("a",{href:"#".concat(t.id),className:Qe()({active:u&&t.id===u.id})},t.text),e(t))}))}(n))," */}",r.a.createElement("div",{className:"content",ref:O,onScroll:function(){return Ot()(w,100)}},r.a.createElement(bt,{doc:t})),r.a.createElement("div",{className:"floating-tools"},r.a.createElement(de.g,{"aria-label":"Up",onClick:function(){O.current&&O.current.scrollTo(0,0)},className:Qe()({hide:!b})},r.a.createElement(se.a,{icon:"arrow-up"}))))};function Ct(){var e=Object(X.a)(["\n    query Doc($docId: String!) {\n        doc(docId: $docId) {\n            id\n            docName\n            content\n            lastModified\n        }\n    }\n"]);return Ct=function(){return e},e}var kt=ce()(Ct()),yt=r.a.memo(function(e){var t=e.currentUser,n=e.docId,a=Object(ne.a)(function(e,n){var a=n.headers;return{headers:Object(h.a)({},a,{authorization:t?t.authToken:void 0})}}),o=new ee.default({link:te.a.from([Object(ae.a)(function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.map(function(e){var t=e.message,n=e.locations,a=e.path;return console.log("[GraphQL error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(a))}),n&&console.log("[Network error]: ".concat(n))}),a.concat(new oe.a({uri:"http://localhost:3001/graphql"}))]),cache:new Z.a});return t?r.a.createElement(ie.ApolloProvider,{client:o},r.a.createElement(ie.Query,{query:kt,variables:{authToken:t.authToken,docId:n},fetchPolicy:"network-only"},function(e){var t=e.loading,n=e.error,a=e.data;return t||n||!a.doc?r.a.createElement(We,{text:"Initializing Yame Previewer..."}):r.a.createElement("div",{className:"App"},r.a.createElement(wt,{doc:L.parseFromResponse(a)}))})):r.a.createElement(We,{text:"Authenticating User..."})}),jt=function(e){var t=e.match.params.docId;return r.a.createElement(V,null,r.a.createElement(Q.Consumer,null,function(e){var n=e.currentUser;return r.a.createElement(yt,{currentUser:n,docId:t})}))},Nt=function(e){return r.a.createElement("div",null,e.match.params.permalink)},St=function(){return r.a.createElement(l.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,null,r.a.createElement(s.a,{exact:!0,path:"/editor",component:gt}),r.a.createElement(s.a,{exact:!0,path:"/preview/:docId",component:jt}),r.a.createElement(s.a,{exact:!0,path:"/:username/:permalink",component:Nt}))))};n(622),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(St,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[238,2,1]]]);
//# sourceMappingURL=main.fd109931.chunk.js.map